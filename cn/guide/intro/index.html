<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>工作原理 | Weex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="工作原理整体架构Weex 表面上是一个客户端技术，但实际上它串联起了从本地开发环境到云端部署和分发的整个链路。开发者首先可以在本地想撰写 web 页面一样撰写一个 app 的页面，然后编译成一段 JavaScript 代码，形成 Weex 的一个 JS bundle；在云端，开发者可以把生成的 JS bundle 部署上去，然后通过网络请求或预下发的方式传递到用户的移动应用客户端；在移动应用客户端">
<meta property="og:type" content="website">
<meta property="og:title" content="工作原理">
<meta property="og:url" content="https://weex-project.io/cn/guide/intro/index.html">
<meta property="og:site_name" content="Weex">
<meta property="og:description" content="工作原理整体架构Weex 表面上是一个客户端技术，但实际上它串联起了从本地开发环境到云端部署和分发的整个链路。开发者首先可以在本地想撰写 web 页面一样撰写一个 app 的页面，然后编译成一段 JavaScript 代码，形成 Weex 的一个 JS bundle；在云端，开发者可以把生成的 JS bundle 部署上去，然后通过网络请求或预下发的方式传递到用户的移动应用客户端；在移动应用客户端">
<meta property="og:image" content="https://weex-project.io/../images/flow.png">
<meta property="og:updated_time" content="2017-01-12T01:15:09.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="工作原理">
<meta name="twitter:description" content="工作原理整体架构Weex 表面上是一个客户端技术，但实际上它串联起了从本地开发环境到云端部署和分发的整个链路。开发者首先可以在本地想撰写 web 页面一样撰写一个 app 的页面，然后编译成一段 JavaScript 代码，形成 Weex 的一个 JS bundle；在云端，开发者可以把生成的 JS bundle 部署上去，然后通过网络请求或预下发的方式传递到用户的移动应用客户端；在移动应用客户端">
<meta name="twitter:image" content="https://weex-project.io/../images/flow.png">
  
    <link rel="alternate" href="/atom.xml" title="Weex" type="application/atom+xml">
  
  
    <link rel="icon" href="//gw.alicdn.com/tps/TB1XNqxPXXXXXcSXVXXXXXXXXXX-64-63.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/swiper.min.css">
</head>

<body id="guide" class="lang-cn">
  
  <script>
    window.PAGE_TYPE = "guide";
    window.ROOT = "/"
  </script>
  <header id="header">
  <div class="navbar">
    <a id="logo" href="/cn/">
      <img src="//img.alicdn.com/tps/TB1zBLaPXXXXXXeXXXXXXXXXXXX-121-59.svg" />
    </a>
    <div class="main-nav">
      <ul class="links">
        <li><a href="/cn/guide">教程</a></li>
        <li><a href="/cn/references">手册</a></li>
        <li><a href="/cn/faq.html">FAQ</a></li>
        <li class="dropdown">
            <a href="javascript:;">下载</a>
            <ul class="dropdown-menu subnav">
              <li>
                <a href="/cn/playground.html">Playground</a>
              </li>
              <li>
                <a href="https://www.npmjs.com/package/weex-devtool" target="_blank">Devtool</a>
              </li>
              <li>
                <a href="https://www.npmjs.com/package/weexpack" target="_blank">Weexpack</a>
              </li>
              <li>
                <a href="http://dotwe.org" target="_blank">Snippets</a>
              </li>
              <li>
                <a href="https://market.weex-project.io/" target="_blank">Market</a>
              </li>
            </ul>
        </li>
      </ul>
      <ul class="info">
        <li><a href="https://github.com/alibaba/weex/" target="_blank"><span class="btn-github iconfont icon-github"></span></a></li>
      </ul>
      <ul class="tools">
        <li>
          <div class="search">
  <form id="search-form" class="search-form"> <!-- 搜索框相关 -->
    <input type="text" id="search-input-header" name="q" results="0" placeholder="search..." class="form-control search-input" autocomplete="off" autocorrect="off"/>
    <span class="iconfont icon-search"></span>
  </form>
  <div class="results-panel">
  </div>
</div>
        </li>
        <!--<li></li>-->
      </ul>
    </div>
  </div>
  <div id="mobile-nav">
    <a id="logo" href="/cn/">
      <img src="//img.alicdn.com/tps/TB1zBLaPXXXXXXeXXXXXXXXXXXX-121-59.svg" />
    </a>
    <a class="btn-menu"><span class="iconfont icon-nav"></span></a>
  </div>
</header>
  <div id="sidebar" class="">
  <div class="sidebar-menu">
    
      <div class="search">
  <form id="search-form" class="search-form"> <!-- 搜索框相关 -->
    <input type="text" id="search-input-sidebar" name="q" results="0" placeholder="search..." class="form-control search-input" autocomplete="off" autocorrect="off"/>
    <span class="iconfont icon-search"></span>
  </form>
  <div class="results-panel">
  </div>
</div>
      


<div class="summary">
  <h2 class="part-title">
    
      教程
    
  </h2>
  <ul class="doc-summary">
    
    
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
   
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/index.html" class="sidebar-link  ">快速上手</a></h3>
          
        
      </li>
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/dev-with-weexpack.html" class="sidebar-link  ">构建全新应用</a></h3>
          
        
      </li>
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/integrate-to-your-app.html" class="sidebar-link  ">集成 Weex 到已有应用</a></h3>
          
        
      </li>
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/intro/index.html" class="sidebar-link">优势介绍</a></h3>
          
            <ul class="chapter">
              
                <li>
                  <a href="/cn/guide/intro/index.html" class="sidebar-link current ">工作原理</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/web-dev-experience.html" class="sidebar-link  ">Web 开发体验</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/using-vue.html" class="sidebar-link  ">使用 Vue 开发 Weex 页面</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/write-once.html" class="sidebar-link  ">一次撰写，多端运行</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/app-architecture.html" class="sidebar-link  ">用 Weex 构建移动应用</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/page-architecture.html" class="sidebar-link  ">Weex 页面结构</a>
                </li>
              
            </ul>
          
        
      </li>
    
    
    
      <li>
        <h3 class="chapter-title"><a href="/cn/v-0.10/guide/index.html" class="sidebar-link">Legacy</a></h3>
      </li>
    
  </ul>
</div>
    
    <a class="btn-close-sidebar iconfont  icon-close"></a>
  </div>
</div>
  <div class="article-wrapper page-layout">
  <div class="doc-nav">
    


<div class="summary">
  <h2 class="part-title">
    
      教程
    
  </h2>
  <ul class="doc-summary">
    
    
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
   
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/index.html" class="sidebar-link  ">快速上手</a></h3>
          
        
      </li>
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/dev-with-weexpack.html" class="sidebar-link  ">构建全新应用</a></h3>
          
        
      </li>
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/integrate-to-your-app.html" class="sidebar-link  ">集成 Weex 到已有应用</a></h3>
          
        
      </li>
    
      <li>
        
          <h3 class="chapter-title"><a href="/cn/guide/intro/index.html" class="sidebar-link">优势介绍</a></h3>
          
            <ul class="chapter">
              
                <li>
                  <a href="/cn/guide/intro/index.html" class="sidebar-link current ">工作原理</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/web-dev-experience.html" class="sidebar-link  ">Web 开发体验</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/using-vue.html" class="sidebar-link  ">使用 Vue 开发 Weex 页面</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/write-once.html" class="sidebar-link  ">一次撰写，多端运行</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/app-architecture.html" class="sidebar-link  ">用 Weex 构建移动应用</a>
                </li>
              
                <li>
                  <a href="/cn/guide/intro/page-architecture.html" class="sidebar-link  ">Weex 页面结构</a>
                </li>
              
            </ul>
          
        
      </li>
    
    
    
      <li>
        <h3 class="chapter-title"><a href="/cn/v-0.10/guide/index.html" class="sidebar-link">Legacy</a></h3>
      </li>
    
  </ul>
</div>
  </div>
  

<article class="article article-type-guide">
  <div class="article-entry" itemprop="articleBody">
    <header class="article-header">
  
    
      <h1 class="article-title" itemprop="name">
        工作原理
      </h1>
    
  
  <time class="article-date" datetime="2017-01-12T01:15:09.000Z">Updated time: 12/01/2017</time>
</header>
    <h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><h2 id="整体架构"><a href="#整体架构" class="headerlink" title="整体架构"></a>整体架构</h2><p>Weex 表面上是一个客户端技术，但实际上它串联起了从本地开发环境到云端部署和分发的整个链路。开发者首先可以在本地想撰写 web 页面一样撰写一个 app 的页面，然后编译成一段 JavaScript 代码，形成 Weex 的一个 JS bundle；在云端，开发者可以把生成的 JS bundle 部署上去，然后通过网络请求或预下发的方式传递到用户的移动应用客户端；在移动应用客户端里，WeexSDK 会准备好一个 JavaScript 引擎，并且在用户打开一个 Weex 页面时执行相应的 JS bundle，并在执行过程中产生各种命令发送到 native 端进行的界面渲染或数据存储、网络通信、调用设备功能、用户交互响应等移动应用的场景实践；同时，如果用户没有安装移动应用，他仍然可以在浏览器里打开一个相同的 web 页面，这个页面是使用相同的页面源代码，通过浏览器里的 JavaScript 引擎运行起来的。</p>
<p><img src="../images/flow.png" alt="How it works"></p>
<h2 id="本地开发环境"><a href="#本地开发环境" class="headerlink" title="本地开发环境"></a>本地开发环境</h2><p>Weex 的本地开发环境基于 web 开发体验而设计，web 开发者可以通过自己熟悉的 HTML/CSS/JavaScript 技术和语法实现移动应用的界面。同时 Weex 也对 Vue.js 这一非常优秀的前端框架做了官方的支持。</p>
<p>除此之外，Weex 的工程设计也是 web 开发者非常熟悉的，首先 web 开发者可以使用自己熟悉的 npm 进行依赖管理；其次 web 开发者在通过项目脚手架初始化工程、开发、调试、质量控制等各个环节，都可以参考 web 开发已有的最佳实践。</p>
<p>和如今 web 开发的最佳实践一样，Weex 会把一个页面的源代码全部编译打包成一个 JS bundle，在浏览器中，我们需要把这个 JS bundle 作为一段 <code>&lt;script&gt;</code> 载入网页，在客户端里，我们把这段 JS bundle 载入本地，并通过 WeexSDK 直接执行。</p>
<!-- 和 web 开发的异同 -->
<!-- 和 vue 开发的异同 -->
<!-- 如何创建一个新项目 -->
<!-- 如何在 native 里 debug -->
<!-- 如何在 html5 里 debug -->
<h2 id="云端部署和分发"><a href="#云端部署和分发" class="headerlink" title="云端部署和分发"></a>云端部署和分发</h2><p>Weex 的 JS bundle 可以作为 web 开发中的一段静态资源进行部署和下发。几乎可以复用 HTML5 所有的工程体系和最佳实践。比如在本地开发环境通过部署工具将 JS bundle 部署到 CDN、通过 CMS 或搭建平台把业务数据和模块化的前端组件自动化拼接生成 JS bundle、通过服务端 JS bundle 的流量和日志统计页面的访问情况、通过 AppCache 或类似的方式对 JS bundle 在客户端进行缓存或预加载以降低网络通信的成本等。</p>
<h2 id="客户端-JavaScript-引擎"><a href="#客户端-JavaScript-引擎" class="headerlink" title="客户端 JavaScript 引擎"></a>客户端 JavaScript 引擎</h2><p>Weex 的 iOS 和 Android 客户端中都会运行一个 JavaScript 引擎，来执行 JS bundle，同时向各端的渲染层发送规范化的指令，调度客户端的渲染和其它各种能力。我们在 iOS 下选择了 JavaScriptCore 内核，而在 Android 下选择了 UC 提供的 v8 内核。无论是从性能还是稳定性方面都提供了强有力的保障。</p>
<p>为了让整个移动应用的资源利用得更好，我们在客户端提供的 JavaScript 引擎是单例的，即所有 JS bundle 公用一个 JavaScript 内核实例，同时对每个 JS bundle 在运行时进行了上下文的隔离，使得每个 JS bundle 都能够高效安全的工作。我们还把 Vue 2.0 这样的 JS Framework 做了预置，开发者不必把 JS Framework 打包在每个 JS bundle 里，从而大大减少了 JS bundle 的体积，也就进一步保障了页面打开的速度。</p>
<h2 id="客户端渲染层"><a href="#客户端渲染层" class="headerlink" title="客户端渲染层"></a>客户端渲染层</h2><p>Weex 目前提供了 iOS 和 Android 两个客户端的 native 渲染层。每个端都基于 DOM 模型设计并实现了标准的界面渲染接口供 JavaScript 引擎调用。并且结合 web 标准和 native 的特点和优势实现了一套统一的组件和模块。尤其是在界面首屏加载时间、native 下长列表的资源开销和复用情况、CPU、内存、帧率 等关键指标上，都有非常优秀的表现。Weex 官方已经提供了一组开发者最常用的组件和模块，但面对丰富多样的移动应用研发需求，团队也难免会力不从心，为此我们提供了灵活自由的横向扩展能力，开发者可以根据自身的情况定制属于自己的客户端组件和模块，进一步丰富 Weex 在客户端上的能力。</p>
<!-- 组件和模块和 web 标准的区别 -->
<!-- 如何接入 iOS -->
<!-- 如何接入 Android -->
<!-- 如何扩展 iOS -->
<!-- 如何扩展 Android -->
<h2 id="浏览器渲染"><a href="#浏览器渲染" class="headerlink" title="浏览器渲染"></a>浏览器渲染</h2><p>Weex 除了提供 iOS 和 Android 的客户端渲染层之外，还基于 Vue 2.0 对官方的所有组件和模块进行了封装，开发者可以基于 Vue 2.0 用同一套源代码构建出在浏览器中相同效果的页面。并且同样可以横向扩展。</p>
<!-- 如何使用 HTML5 版本 -->
<!-- 如何扩展 HTML5 -->
  </div>
  
</article>
</div>
  
  <footer id="footer">
  <div class="row clearfix">
    <div class="ali-logo">
      <img src="//gw.alicdn.com/tps/TB1Ef93PXXXXXaXXpXXXXXXXXXX-252-126.png" alt="Alibaba">
    </div>
    <div class="dropdown select-lang">
      <a href="javascript:;" class="dropdown-toggle">
        Language
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="/guide/intro/index.html">English</a>
        </li>
        <li>
          <a href="/cn/guide/intro/index.html">中文</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="row">
    <p><span>Released under </span><a href="">Apache License 2.0</a></p>
  </div>
  <div class="row clearfix">
    <div class="cell"><span>Copyright(c) 2016 </span><a href="https://www.alibaba.com">Alibaba</a></div>
    <div class="cell"><span>GroupMade by </span><a href="">阿里云UED AX</a></div>
  </div>
</footer>
  <div style="display: none;">
  <script src="//s95.cnzz.com/z_stat.php?id=1261102667&amp;web_id=1261102667" language="JavaScript"></script>
</div>

  <script src="/js/reqwest.js"></script>
  <script src="/js/common.js"></script>
</body>
</html>
